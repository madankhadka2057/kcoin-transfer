{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Gravity/frontend/services/api.ts"],"sourcesContent":["import axios from 'axios';\r\nimport { getSession } from 'next-auth/react';\r\n\r\nconst api = axios.create({\r\n    baseURL: 'http://localhost:3001/api',\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n    },\r\n});\r\n\r\napi.interceptors.request.use(async (config) => {\r\n    const session = await getSession();\r\n    // @ts-ignore\r\n    const token = session?.apiToken;\r\n\r\n    if (token) {\r\n        config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n});\r\n\r\nexport const register = async (email: string, password: string) => {\r\n    const response = await api.post('/auth/register', { email, password });\r\n    return response.data;\r\n};\r\n\r\nexport const login = async (email: string, password: string) => {\r\n    const response = await api.post('/auth/login', { email, password });\r\n    return response.data;\r\n};\r\n\r\nexport const logout = () => {\r\n    // NextAuth handles logout, but we might want to clear local state if any\r\n};\r\n\r\nexport const getWallet = async () => {\r\n    const response = await api.get('/wallet');\r\n    return response.data;\r\n};\r\n\r\nexport const createTransaction = async (recipientAddress: string, amount: number) => {\r\n    const response = await api.post('/transactions', { recipientAddress, amount });\r\n    return response.data;\r\n};\r\n\r\nexport const getPendingTransactions = async () => {\r\n    const response = await api.get('/transactions/pending');\r\n    return response.data;\r\n};\r\n\r\nexport const mineBlock = async () => {\r\n    const response = await api.post('/mine');\r\n    return response.data;\r\n};\r\n\r\nexport const getChain = async () => {\r\n    const response = await api.get('/chain');\r\n    return response.data;\r\n};\r\n\r\nexport { api };\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;;;AAEA,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IACrB,SAAS;IACT,SAAS;QACL,gBAAgB;IACpB;AACJ;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,OAAO;IAChC,MAAM,UAAU,MAAM,IAAA,+JAAU;IAChC,aAAa;IACb,MAAM,QAAQ,SAAS;IAEvB,IAAI,OAAO;QACP,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IACpD;IACA,OAAO;AACX;AAEO,MAAM,WAAW,OAAO,OAAe;IAC1C,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC,kBAAkB;QAAE;QAAO;IAAS;IACpE,OAAO,SAAS,IAAI;AACxB;AAEO,MAAM,QAAQ,OAAO,OAAe;IACvC,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC,eAAe;QAAE;QAAO;IAAS;IACjE,OAAO,SAAS,IAAI;AACxB;AAEO,MAAM,SAAS;AAClB,yEAAyE;AAC7E;AAEO,MAAM,YAAY;IACrB,MAAM,WAAW,MAAM,IAAI,GAAG,CAAC;IAC/B,OAAO,SAAS,IAAI;AACxB;AAEO,MAAM,oBAAoB,OAAO,kBAA0B;IAC9D,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC,iBAAiB;QAAE;QAAkB;IAAO;IAC5E,OAAO,SAAS,IAAI;AACxB;AAEO,MAAM,yBAAyB;IAClC,MAAM,WAAW,MAAM,IAAI,GAAG,CAAC;IAC/B,OAAO,SAAS,IAAI;AACxB;AAEO,MAAM,YAAY;IACrB,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC;IAChC,OAAO,SAAS,IAAI;AACxB;AAEO,MAAM,WAAW;IACpB,MAAM,WAAW,MAAM,IAAI,GAAG,CAAC;IAC/B,OAAO,SAAS,IAAI;AACxB"}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///D:/Gravity/frontend/services/socket.ts"],"sourcesContent":["import { io } from 'socket.io-client';\r\n\r\n// Connect to the backend server\r\nexport const socket = io('http://localhost:3001', {\r\n    transports: ['websocket'],\r\n    autoConnect: true,\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;;AAGO,MAAM,SAAS,IAAA,wLAAE,EAAC,yBAAyB;IAC9C,YAAY;QAAC;KAAY;IACzB,aAAa;AACjB"}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///D:/Gravity/frontend/app/dashboard/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { getWallet, createTransaction, logout } from '@/services/api';\r\nimport { socket } from '@/services/socket';\r\nimport { Wallet, Send, LogOut, RefreshCw, User, Zap, Box } from 'lucide-react';\r\nimport { useSession } from 'next-auth/react';\r\n\r\nexport default function Dashboard() {\r\n  const { data: session } = useSession();\r\n  const [wallet, setWallet] = useState<any>(null);\r\n  const [recipient, setRecipient] = useState('');\r\n  const [amount, setAmount] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n  const router = useRouter();\r\n\r\n  const fetchWallet = async () => {\r\n    try {\r\n      const data = await getWallet();\r\n      setWallet(data);\r\n    } catch (error) {\r\n      // router.push('/'); // Let middleware or session handle redirect\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchWallet();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!wallet?.address) return;\r\n\r\n    const handleTransaction = (transaction: any) => {\r\n        console.log('New transaction:', transaction);\r\n        // If we are the sender or recipient, refresh balance\r\n        if (transaction.senderAddress === wallet.address || transaction.recipientAddress === wallet.address) {\r\n            fetchWallet();\r\n        }\r\n    };\r\n\r\n    const handleBlock = () => {\r\n        console.log('Block mined');\r\n        fetchWallet();\r\n    };\r\n\r\n    // Listen for real-time updates\r\n    socket.on('transaction:new', handleTransaction);\r\n    socket.on('block:mined', handleBlock);\r\n\r\n    return () => {\r\n        socket.off('transaction:new', handleTransaction);\r\n        socket.off('block:mined', handleBlock);\r\n    };\r\n  }, [wallet?.address]); // Only re-bind if address changes (stable)\r\n\r\n  const handleSend = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setMessage('');\r\n    try {\r\n      await createTransaction(recipient, Number(amount));\r\n      setMessage('Transaction sent to pending pool!');\r\n      setRecipient('');\r\n      setAmount('');\r\n      fetchWallet(); \r\n    } catch (error: any) {\r\n      setMessage(error.response?.data?.error || 'Transaction failed');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    logout();\r\n    router.push('/');\r\n  };\r\n\r\n  if (!wallet) return (\r\n    <div className=\"min-h-screen bg-slate-950 text-white flex items-center justify-center\">\r\n      <div className=\"animate-pulse flex flex-col items-center\">\r\n        <div className=\"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4\"></div>\r\n        <p className=\"text-slate-400\">Loading your wallet...</p>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-slate-950 to-black text-white p-6 md:p-12\">\r\n      <div className=\"max-w-6xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"flex flex-col md:flex-row justify-between items-center mb-12 gap-6\">\r\n          <div>\r\n            <h1 className=\"text-4xl font-bold bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 bg-clip-text text-transparent mb-2\">\r\n              KCoin Dashboard\r\n            </h1>\r\n            <div className=\"flex items-center text-slate-400 bg-slate-900/50 px-4 py-2 rounded-full border border-slate-800 backdrop-blur-sm\">\r\n              <User className=\"w-4 h-4 mr-2 text-blue-400\" />\r\n              <span className=\"text-sm font-medium\">{session?.user?.email || 'Miner'}</span>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"flex flex-wrap gap-3 justify-center\">\r\n             <button\r\n              onClick={() => router.push('/mining')}\r\n              className=\"bg-slate-800/80 hover:bg-slate-700 text-white px-6 py-3 rounded-xl transition-all border border-slate-700 hover:border-yellow-500/50 flex items-center group\"\r\n            >\r\n              <Zap className=\"w-4 h-4 mr-2 text-yellow-500 group-hover:text-yellow-400\" /> \r\n              Mining Station\r\n            </button>\r\n            <button\r\n              onClick={() => router.push('/explorer')}\r\n              className=\"bg-slate-800/80 hover:bg-slate-700 text-white px-6 py-3 rounded-xl transition-all border border-slate-700 hover:border-indigo-500/50 flex items-center group\"\r\n            >\r\n              <Box className=\"w-4 h-4 mr-2 text-indigo-500 group-hover:text-indigo-400\" />\r\n              Explorer\r\n            </button>\r\n            <button\r\n              onClick={handleLogout}\r\n              className=\"bg-red-500/10 hover:bg-red-500/20 text-red-400 hover:text-red-300 px-6 py-3 rounded-xl transition-all border border-red-500/20 flex items-center\"\r\n            >\r\n              <LogOut className=\"w-4 h-4 mr-2\" /> Logout\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n          {/* Wallet Info Card */}\r\n          <div className=\"relative group\">\r\n            <div className=\"absolute -inset-0.5 bg-gradient-to-r from-blue-600 to-cyan-600 rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-1000\"></div>\r\n            <div className=\"relative bg-slate-900/90 backdrop-blur-xl rounded-2xl p-8 border border-slate-800 h-full\">\r\n              <div className=\"flex items-center justify-between mb-8\">\r\n                <h2 className=\"text-2xl font-bold flex items-center\">\r\n                  <Wallet className=\"w-8 h-8 mr-3 text-blue-500\" /> \r\n                  Wallet Overview\r\n                </h2>\r\n                <button \r\n                  onClick={fetchWallet} \r\n                  className=\"p-2 hover:bg-slate-800 rounded-lg text-slate-400 hover:text-white transition-colors\"\r\n                  title=\"Refresh Balance\"\r\n                >\r\n                  <RefreshCw className=\"w-5 h-5\" />\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"space-y-6\">\r\n                <div className=\"bg-slate-950/50 p-6 rounded-2xl border border-slate-800/50\">\r\n                  <p className=\"text-sm text-slate-400 mb-2 uppercase tracking-wider font-medium\">Total Balance</p>\r\n                  <div className=\"flex items-baseline\">\r\n                    <span className=\"text-5xl font-bold text-white tracking-tight\">{wallet.balance}</span>\r\n                    <span className=\"ml-2 text-xl text-blue-400 font-medium\">KCN</span>\r\n                  </div>\r\n                </div>\r\n                \r\n                <div className=\"bg-slate-950/50 p-6 rounded-2xl border border-slate-800/50\">\r\n                  <p className=\"text-sm text-slate-400 mb-2 uppercase tracking-wider font-medium\">Wallet Address</p>\r\n                  <div className=\"font-mono text-xs md:text-sm text-slate-300 break-all bg-slate-900 p-3 rounded-lg border border-slate-800 select-all\">\r\n                    {wallet.address}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Send Transaction Card */}\r\n          <div className=\"relative group\">\r\n            <div className=\"absolute -inset-0.5 bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl blur opacity-20 group-hover:opacity-40 transition duration-1000\"></div>\r\n            <div className=\"relative bg-slate-900/90 backdrop-blur-xl rounded-2xl p-8 border border-slate-800 h-full\">\r\n              <h2 className=\"text-2xl font-bold mb-8 flex items-center\">\r\n                <Send className=\"w-8 h-8 mr-3 text-purple-500\" /> \r\n                Transfer Assets\r\n              </h2>\r\n              \r\n              <form onSubmit={handleSend} className=\"space-y-6\">\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-slate-400 ml-1\">Recipient</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={recipient}\r\n                    onChange={(e) => setRecipient(e.target.value)}\r\n                    className=\"w-full bg-slate-950 border border-slate-800 rounded-xl py-4 px-5 text-white focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500 transition-all placeholder-slate-600\"\r\n                    placeholder=\"Wallet Address or Email\"\r\n                    required\r\n                  />\r\n                </div>\r\n                \r\n                <div className=\"space-y-2\">\r\n                  <label className=\"text-sm font-medium text-slate-400 ml-1\">Amount (KCN)</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={amount}\r\n                    onChange={(e) => setAmount(e.target.value)}\r\n                    className=\"w-full bg-slate-950 border border-slate-800 rounded-xl py-4 px-5 text-white focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500 transition-all placeholder-slate-600\"\r\n                    placeholder=\"0.00\"\r\n                    min=\"0.01\"\r\n                    step=\"0.01\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                {message && (\r\n                  <div className={`p-4 rounded-xl text-sm font-medium text-center animate-fade-in ${\r\n                    message.includes('failed') \r\n                      ? 'bg-red-500/10 text-red-400 border border-red-500/20' \r\n                      : 'bg-green-500/10 text-green-400 border border-green-500/20'\r\n                  }`}>\r\n                    {message}\r\n                  </div>\r\n                )}\r\n\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={loading}\r\n                  className=\"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold py-4 rounded-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-purple-900/20\"\r\n                >\r\n                  {loading ? 'Processing Transaction...' : 'Send KCoin'}\r\n                </button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}